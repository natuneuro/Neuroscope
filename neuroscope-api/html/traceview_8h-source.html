<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NeuroScope: traceview.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>traceview.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">                          traceview.h  -  description</span>
<a name="l00003"></a>00003 <span class="comment">                             -------------------</span>
<a name="l00004"></a>00004 <span class="comment">    begin                : Wed Mar 17 2004</span>
<a name="l00005"></a>00005 <span class="comment">    copyright            : (C) 2004 by Lynn Hazan</span>
<a name="l00006"></a>00006 <span class="comment">    email                : lynn.hazan.myrealbox.com</span>
<a name="l00007"></a>00007 <span class="comment"> ***************************************************************************/</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="comment">/***************************************************************************</span>
<a name="l00010"></a>00010 <span class="comment"> *                                                                         *</span>
<a name="l00011"></a>00011 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
<a name="l00012"></a>00012 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
<a name="l00013"></a>00013 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<a name="l00014"></a>00014 <span class="comment"> *   (at your option) any later version.                                   *</span>
<a name="l00015"></a>00015 <span class="comment"> *                                                                         *</span>
<a name="l00016"></a>00016 <span class="comment"> ***************************************************************************/</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#ifndef TRACEVIEW_H</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define TRACEVIEW_H</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 <span class="comment">// include files for QT</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;qwidget.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;qpixmap.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;qdict.h&gt;</span> 
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;qpair.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;qimage.h&gt;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">//include files for the application</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include "baseframe.h"</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include "tracesprovider.h"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "eventdata.h"</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">//Inclused files for KDE</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;kstatusbar.h&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">//include files for c/c++ libraries</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">// forward declaration of the Neuroscope classes</span>
<a name="l00040"></a>00040 <span class="keyword">class </span><a class="code" href="classChannelColors.html">ChannelColors</a>;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classItemColors.html">ItemColors</a>;
<a name="l00042"></a>00042 <span class="keyword">class </span><a class="code" href="classClustersProvider.html">ClustersProvider</a>;
<a name="l00043"></a>00043 <span class="keyword">class </span>EventsProvider;
<a name="l00044"></a>00044 
<a name="l00050"></a><a class="code" href="classTraceView.html">00050</a> <span class="keyword">class </span><a class="code" href="classTraceView.html">TraceView</a> : <span class="keyword">public</span> <a class="code" href="classBaseFrame.html">BaseFrame</a>  {
<a name="l00051"></a>00051    Q_OBJECT
<a name="l00052"></a>00052 <span class="keyword">public</span>:
<a name="l00086"></a>00086      <a class="code" href="classTraceView.html#e42f718309cf39b003b5e8b5795ad143">TraceView</a>(<a class="code" href="classTracesProvider.html">TracesProvider</a>&amp; tracesProvider,<span class="keywordtype">bool</span> greyScale,<span class="keywordtype">bool</span> multiColumns,<span class="keywordtype">bool</span> verticalLines,
<a name="l00087"></a>00087             <span class="keywordtype">bool</span> raster,<span class="keywordtype">bool</span> waveforms,<span class="keywordtype">bool</span> labelsDisplay,QValueList&lt;int&gt;&amp; channelsToDisplay,<span class="keywordtype">int</span> unitGain,<span class="keywordtype">int</span> acquisitionGain,<span class="keywordtype">long</span> start,<span class="keywordtype">long</span> timeFrameWidth,
<a name="l00088"></a>00088             <a class="code" href="classChannelColors.html">ChannelColors</a>* channelColors,QMap&lt;<span class="keywordtype">int</span>, QValueList&lt;int&gt; &gt;* groupsChannels,QMap&lt;int,int&gt;* channelsGroups,
<a name="l00089"></a>00089             QValueList&lt;int&gt;&amp; channelOffsets,QValueList&lt;int&gt;&amp; gains,<span class="keyword">const</span> QValueList&lt;int&gt;&amp; skippedChannels, <span class="keywordtype">int</span> rasterHeight,QImage backgroundImage,QWidget* parent=0, <span class="keyword">const</span> <span class="keywordtype">char</span>* name=0,QColor backgroundColor = Qt::black,KStatusBar* statusBar = 0L,
<a name="l00090"></a>00090             <span class="keywordtype">int</span> minSize = 500, <span class="keywordtype">int</span> maxSize = 4000, <span class="keywordtype">int</span> windowTopLeft = -500,<span class="keywordtype">int</span> windowBottomRight = 1001, <span class="keywordtype">int</span> border = 0);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   
<a name="l00094"></a>00094      ~<a class="code" href="classTraceView.html">TraceView</a>();
<a name="l00095"></a>00095 
<a name="l00101"></a>00101   <span class="keyword">enum</span> {SELECT = ZOOM+1,MEASURE = ZOOM+2,SELECT_TIME = ZOOM+3,SELECT_EVENT = ZOOM+4,ADD_EVENT = ZOOM+5,DRAW_LINE = ZOOM+6};
<a name="l00102"></a>00102   
<a name="l00103"></a>00103 
<a name="l00108"></a>00108   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#677cf00c18253fe5018399a089c13d58">setMultiColumns</a>(<span class="keywordtype">bool</span> multiple);
<a name="l00109"></a>00109 
<a name="l00113"></a>00113   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#2993897438b0c77c574d01da5a8c9dda">setClusterVerticalLines</a>(<span class="keywordtype">bool</span> lines);
<a name="l00114"></a>00114 
<a name="l00118"></a>00118   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#3b0dbd10acd952e197b63d9ac060e3df">setClusterRaster</a>(<span class="keywordtype">bool</span> raster);
<a name="l00119"></a>00119 
<a name="l00123"></a>00123   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#30ea3dc4a0bb159499e6c0b0a1af34cb">setClusterWaveforms</a>(<span class="keywordtype">bool</span> waveforms);
<a name="l00124"></a>00124   
<a name="l00125"></a>00125 
<a name="l00129"></a>00129   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#29f724fb8b860465085ea3f6fd71bb98">setGreyScale</a>(<span class="keywordtype">bool</span> grey);
<a name="l00130"></a>00130   
<a name="l00135"></a>00135   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#9f43462bbb0decb58983fbcb4f43ff4c">displayTimeFrame</a>(<span class="keywordtype">long</span> start,<span class="keywordtype">long</span> timeFrameWidth);
<a name="l00136"></a>00136 
<a name="l00141"></a>00141   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#bb22ab2704e427130a50c9e1da7f534a">showChannels</a>(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; channelsToShow);
<a name="l00142"></a>00142   
<a name="l00145"></a>00145   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#cc417386ee99e46eb3e0331306289fdf">increaseAllAmplitude</a>();
<a name="l00146"></a>00146 
<a name="l00149"></a>00149   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#3eceed6b63146a9fa35789dba10c72d7">decreaseAllAmplitude</a>();
<a name="l00150"></a>00150 
<a name="l00154"></a>00154   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#cac9e8085d783b610f7cbeac057be6e8">increaseSelectedChannelsAmplitude</a>(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; channelIds);
<a name="l00155"></a>00155 
<a name="l00159"></a>00159   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#d01669018d721b3c27c706de59c8c25d">decreaseSelectedChannelsAmplitude</a>(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; channelIds);
<a name="l00160"></a>00160 
<a name="l00165"></a>00165   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#22966ee44d2d5e1c2893eccf8c7e8a86">setGains</a>(<span class="keywordtype">int</span> gain,<span class="keywordtype">int</span> acquisitionGain);
<a name="l00166"></a>00166   
<a name="l00171"></a>00171   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#a3b2484c2b5cd1f0019725ccb52dd796">channelColorUpdate</a>(<span class="keywordtype">int</span> channelId,<span class="keywordtype">bool</span> active);
<a name="l00172"></a>00172 
<a name="l00177"></a><a class="code" href="classTraceView.html#eae68942cdf90244c854b5a70717c49a">00177</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#eae68942cdf90244c854b5a70717c49a">groupColorUpdate</a>(<span class="keywordtype">int</span> groupId,<span class="keywordtype">bool</span> active){
<a name="l00178"></a>00178    <span class="comment">//Everything has to be redraw</span>
<a name="l00179"></a>00179    <a class="code" href="classBaseFrame.html#49da95ca2ea8e59db1a135e661de87b8">drawContentsMode</a> = REDRAW ;
<a name="l00180"></a>00180     <span class="keywordflow">if</span>(active) update();    
<a name="l00181"></a>00181   };  
<a name="l00182"></a>00182   
<a name="l00184"></a><a class="code" href="classTraceView.html#656d0d95e998116eaa127a21f7a43436">00184</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#656d0d95e998116eaa127a21f7a43436">updateDrawing</a>(){  
<a name="l00185"></a>00185    <span class="keywordflow">if</span>(retrieveClusterData) <a class="code" href="classTraceView.html#c0f66e4edec77f7bc4e71738a0386940">updateClusterData</a>(<span class="keyword">true</span>);
<a name="l00186"></a>00186    <span class="keywordflow">else</span>{
<a name="l00187"></a>00187     <span class="comment">//Everything has to be redraw</span>
<a name="l00188"></a>00188     <a class="code" href="classBaseFrame.html#49da95ca2ea8e59db1a135e661de87b8">drawContentsMode</a> = REDRAW ;
<a name="l00189"></a>00189     update();
<a name="l00190"></a>00190    }   
<a name="l00191"></a>00191   };
<a name="l00192"></a>00192 
<a name="l00197"></a>00197   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#6d9c4633da83b8f6859c3f99e43d9f20">groupsModified</a>(<span class="keywordtype">bool</span> active);
<a name="l00198"></a>00198 
<a name="l00203"></a><a class="code" href="classTraceView.html#50f64d221901da6c866e42a7bd5769f2">00203</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#50f64d221901da6c866e42a7bd5769f2">setMode</a>(<a class="code" href="classBaseFrame.html#4ed79292b4a10b809dbfc75539930be3">BaseFrame::Mode</a> selectedMode,<span class="keywordtype">bool</span> active){  
<a name="l00204"></a>00204    <a class="code" href="classBaseFrame.html#4ed79292b4a10b809dbfc75539930be3">Mode</a> previousMode = <a class="code" href="classBaseFrame.html#537365ffcab6cd6a70b85aca5e2bc44b">mode</a>;
<a name="l00205"></a>00205    <a class="code" href="classBaseFrame.html#537365ffcab6cd6a70b85aca5e2bc44b">mode</a> = selectedMode;
<a name="l00206"></a>00206    <span class="keywordflow">if</span>(selectedMode == SELECT){
<a name="l00207"></a>00207     setCursor(selectCursor);
<a name="l00208"></a>00208     <a class="code" href="classBaseFrame.html#8b4b98609f084d284e0f16e52d59e379">drawRubberBand</a>(<span class="keyword">false</span>); 
<a name="l00209"></a>00209    }
<a name="l00210"></a>00210    <span class="keywordflow">if</span>(selectedMode == SELECT_EVENT){
<a name="l00211"></a>00211     setCursor(selectEventCursor);
<a name="l00212"></a>00212     <a class="code" href="classBaseFrame.html#8b4b98609f084d284e0f16e52d59e379">drawRubberBand</a>(<span class="keyword">false</span>);
<a name="l00213"></a>00213    }
<a name="l00214"></a>00214    <span class="keywordflow">if</span>(selectedMode == ADD_EVENT){
<a name="l00215"></a>00215     setCursor(addEventCursor);
<a name="l00216"></a>00216     <a class="code" href="classBaseFrame.html#8b4b98609f084d284e0f16e52d59e379">drawRubberBand</a>(<span class="keyword">false</span>);
<a name="l00217"></a>00217    }
<a name="l00218"></a>00218    <span class="keywordflow">if</span>(selectedMode == ZOOM){
<a name="l00219"></a>00219     setCursor(<a class="code" href="classBaseFrame.html#461a05b89b41e7a282d2352464b7d403">zoomCursor</a>); 
<a name="l00220"></a>00220     <a class="code" href="classBaseFrame.html#8b4b98609f084d284e0f16e52d59e379">drawRubberBand</a>(<span class="keyword">false</span>); 
<a name="l00221"></a>00221    } 
<a name="l00222"></a>00222    <span class="keywordflow">if</span>(selectedMode == MEASURE){
<a name="l00223"></a>00223     <a class="code" href="classBaseFrame.html#8b4b98609f084d284e0f16e52d59e379">drawRubberBand</a>(<span class="keyword">true</span>);
<a name="l00224"></a>00224     setCursor(measureCursor);
<a name="l00225"></a>00225    }
<a name="l00226"></a>00226    <span class="keywordflow">if</span>(selectedMode == SELECT_TIME){
<a name="l00227"></a>00227     <a class="code" href="classBaseFrame.html#8b4b98609f084d284e0f16e52d59e379">drawRubberBand</a>(<span class="keyword">true</span>,<span class="keyword">true</span>);
<a name="l00228"></a>00228     setCursor(selectTimeCursor);
<a name="l00229"></a>00229    }
<a name="l00230"></a>00230    <span class="keywordflow">if</span>(selectedMode == DRAW_LINE){
<a name="l00231"></a>00231     setCursor(drawLineCursor);
<a name="l00232"></a>00232     <a class="code" href="classBaseFrame.html#8b4b98609f084d284e0f16e52d59e379">drawRubberBand</a>(<span class="keyword">false</span>); 
<a name="l00233"></a>00233    }   
<a name="l00234"></a>00234    <span class="keywordflow">if</span>(previousMode == SELECT){
<a name="l00235"></a>00235     selectedChannels.clear();
<a name="l00236"></a>00236     <a class="code" href="classBaseFrame.html#49da95ca2ea8e59db1a135e661de87b8">drawContentsMode</a> = REDRAW;
<a name="l00237"></a>00237     <span class="keywordflow">if</span>(active) update();     
<a name="l00238"></a>00238    }
<a name="l00239"></a>00239    <span class="keywordflow">if</span>(previousMode == SELECT_EVENT){
<a name="l00240"></a>00240     selectedEvent.first = <span class="stringliteral">""</span>;
<a name="l00241"></a>00241     selectedEvent.second = 0;
<a name="l00242"></a>00242     <a class="code" href="classBaseFrame.html#49da95ca2ea8e59db1a135e661de87b8">drawContentsMode</a> = REDRAW;
<a name="l00243"></a>00243     <span class="keywordflow">if</span>(active) update();
<a name="l00244"></a>00244    }
<a name="l00245"></a>00245    <span class="keywordflow">if</span>(previousMode == ADD_EVENT){
<a name="l00246"></a>00246     newEventPosition = -1;
<a name="l00247"></a>00247    }
<a name="l00248"></a>00248    <span class="keywordflow">if</span>(previousMode == DRAW_LINE){
<a name="l00249"></a>00249     linePositions.clear();
<a name="l00250"></a>00250    }
<a name="l00251"></a>00251   };
<a name="l00252"></a>00252 
<a name="l00256"></a>00256   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#c573d1ae32e3bd890eae2a501efd085e">selectChannels</a>(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; selectedIds);
<a name="l00257"></a>00257 
<a name="l00261"></a>00261   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#90b61c279860ba6a7199bee9f04ecad6">resetOffsets</a>(<span class="keyword">const</span> QMap&lt;int,int&gt;&amp; selectedChannelDefaultOffsets);
<a name="l00262"></a>00262 
<a name="l00266"></a>00266   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#5365bed5f922af98134a0c32ddfc12f7">resetGains</a>(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; selectedChannels);
<a name="l00267"></a>00267 
<a name="l00269"></a>00269   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#ee8a0adf56c8b6a2b1f6670c18808a9c">reset</a>();
<a name="l00270"></a>00270   
<a name="l00274"></a>00274   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#418e1b595c420b0700a0f8e8a74410b0">showHideLabels</a>(<span class="keywordtype">bool</span> show);
<a name="l00275"></a>00275 
<a name="l00280"></a><a class="code" href="classTraceView.html#b61715d3e5d1f8b5831f6a6eff669c1e">00280</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#b61715d3e5d1f8b5831f6a6eff669c1e">showCalibration</a>(<span class="keywordtype">bool</span> show,<span class="keywordtype">bool</span> active){
<a name="l00281"></a>00281    <a class="code" href="classBaseFrame.html#49da95ca2ea8e59db1a135e661de87b8">drawContentsMode</a> = REDRAW;
<a name="l00282"></a>00282    showCalibrationScale = show;
<a name="l00283"></a>00283    <span class="keywordflow">if</span>(active) update(); 
<a name="l00284"></a>00284   };
<a name="l00285"></a>00285 
<a name="l00298"></a>00298   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#73180154ba42b8ec3bbe7c8b737c52ab">addClusterProvider</a>(<a class="code" href="classClustersProvider.html">ClustersProvider</a>* clustersProvider,QString name,<a class="code" href="classItemColors.html">ItemColors</a>* clusterColors,
<a name="l00299"></a>00299                           <span class="keywordtype">bool</span> active,QValueList&lt;int&gt;&amp; clustersToShow,QMap&lt;<span class="keywordtype">int</span>, QValueList&lt;int&gt; &gt;* displayGroupsClusterFile,
<a name="l00300"></a>00300                           QMap&lt;int,int&gt;* channelsSpikeGroups,<span class="keywordtype">int</span> nbSamplesBefore,<span class="keywordtype">int</span> nbSamplesAfter,<span class="keyword">const</span> QValueList&lt;int&gt;&amp; clustersToSkip);
<a name="l00301"></a>00301   
<a name="l00306"></a>00306   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#52c7246028a5f4b9d8fc4d4af4de8aa0">removeClusterProvider</a>(QString name,<span class="keywordtype">bool</span> active);
<a name="l00307"></a>00307 
<a name="l00314"></a>00314   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#e5b0e1e65aac66f3a0eee6741e6cb72f">showClusters</a>(QString name,QValueList&lt;int&gt;&amp; clustersToShow);
<a name="l00315"></a>00315 
<a name="l00321"></a>00321   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#68292c93a6d83e737763fcfb004dc493">clusterColorUpdate</a>(QString name,<span class="keywordtype">int</span> clusterId,<span class="keywordtype">bool</span> active);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 
<a name="l00332"></a>00332   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#ad3149a7718fc3505604f56566909a9e">addEventProvider</a>(EventsProvider* eventsProvider,QString name,<a class="code" href="classItemColors.html">ItemColors</a>* eventColors,
<a name="l00333"></a>00333                           <span class="keywordtype">bool</span> active,QValueList&lt;int&gt;&amp; eventsToShow,<span class="keyword">const</span> QValueList&lt;int&gt;&amp; eventsToSkip);
<a name="l00334"></a>00334 
<a name="l00339"></a>00339   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#225c731fabc6eed80becf73f46ae2fdf">removeEventProvider</a>(QString name,<span class="keywordtype">bool</span> active);
<a name="l00340"></a>00340 
<a name="l00347"></a>00347   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#f905ed4f34fe5a16163b57a47e8ad3ad">showEvents</a>(QString name,QValueList&lt;int&gt;&amp; eventsToShow);
<a name="l00348"></a>00348 
<a name="l00354"></a>00354   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#bb2de8d992f3d418ea72d9bb18d61f8a">eventColorUpdate</a>(QString name,<span class="keywordtype">int</span> eventId,<span class="keywordtype">bool</span> active);
<a name="l00355"></a>00355   
<a name="l00362"></a>00362   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#ebcee494b2e1e04300f1a3db6231e518">print</a>(QPainter&amp; printPainter,QPaintDeviceMetrics&amp; metrics,<span class="keywordtype">bool</span> whiteBackground);
<a name="l00363"></a>00363 
<a name="l00365"></a>00365   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#3cdf662307157daa04b3f224bac2bc9a">showNextEvent</a>();
<a name="l00366"></a>00366 
<a name="l00368"></a>00368   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#c09cbd8449960899011e8a05ecbb0e60">showPreviousEvent</a>();
<a name="l00369"></a>00369 
<a name="l00374"></a><a class="code" href="classTraceView.html#11fc7b329f4d9582959d77dd96cd0b9c">00374</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#11fc7b329f4d9582959d77dd96cd0b9c">updateEvents</a>(QString providerName,<span class="keywordtype">bool</span> active){
<a name="l00375"></a>00375    <span class="keywordflow">if</span>(!eventProvidersToUpdate.contains(providerName)) eventProvidersToUpdate.append(providerName);
<a name="l00376"></a>00376    <span class="keywordflow">if</span>(active) update();
<a name="l00377"></a>00377   };
<a name="l00378"></a>00378 
<a name="l00384"></a>00384   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#11fc7b329f4d9582959d77dd96cd0b9c">updateEvents</a>(QString providerName,QValueList&lt;int&gt;&amp; eventsToShow,<span class="keywordtype">bool</span> active);
<a name="l00385"></a>00385 
<a name="l00388"></a>00388   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#70102cdd2e3f466518d94b8a76499880">removeEvent</a>();
<a name="l00389"></a>00389 
<a name="l00391"></a>00391   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#0598450497de6f820195427e0e3b45c1">showNextCluster</a>();
<a name="l00392"></a>00392 
<a name="l00394"></a>00394   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#b7ea5afbcd034a2e4a714bacc7983436">showPreviousCluster</a>();
<a name="l00395"></a>00395 
<a name="l00400"></a>00400   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#3cc69473513811a49f1bc11a16828d86">updateNoneBrowsingEventList</a>(QString providerName,<span class="keyword">const</span> QValueList&lt;int&gt;&amp; eventsToNotBrowse);
<a name="l00401"></a>00401 
<a name="l00406"></a>00406   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#9551a4d217fe8737e9a1e37d9cd7d58a">updateNoneBrowsingClusterList</a>(QString providerName,<span class="keyword">const</span> QValueList&lt;int&gt;&amp; clustersToNotBrowse);
<a name="l00407"></a>00407 
<a name="l00413"></a>00413   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#f1690dd53f979879659f5f9132fe58ba">updateWaveformInformation</a>(<span class="keywordtype">int</span> nbSamplesBefore,<span class="keywordtype">int</span> nbSamplesAfter,<span class="keywordtype">bool</span> active);
<a name="l00414"></a>00414 
<a name="l00419"></a><a class="code" href="classTraceView.html#c97c9af774a621b13efa4f4a61d54dd6">00419</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#c97c9af774a621b13efa4f4a61d54dd6">samplingRateModified</a>(<span class="keywordtype">long</span> <span class="keywordtype">long</span> length){
<a name="l00420"></a>00420    recordingLength = length;
<a name="l00421"></a>00421    <span class="keywordtype">int</span> samplingRate = tracesProvider.<a class="code" href="classTracesProvider.html#2b9aab74330b0baedb576c51126b5036">getSamplingRate</a>();
<a name="l00422"></a>00422    timeStepUnit = timeStep = static_cast&lt;float&gt;(static_cast&lt;float&gt;(1000) / static_cast&lt;float&gt;(samplingRate));
<a name="l00423"></a>00423   };
<a name="l00424"></a>00424 
<a name="l00428"></a>00428   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#c0f66e4edec77f7bc4e71738a0386940">updateClusterData</a>(<span class="keywordtype">bool</span> active);
<a name="l00429"></a>00429   
<a name="l00437"></a>00437   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#721c7802b48c97921515dfc220d0c5bd">updateClusters</a>(QString name,QValueList&lt;int&gt;&amp; clustersToShow,<a class="code" href="classItemColors.html">ItemColors</a>* clusterColors,<span class="keywordtype">bool</span> active);
<a name="l00438"></a>00438   
<a name="l00440"></a>00440   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#2b92d3d2ff47fba47e6f037ed092041e">increaseRatio</a>();
<a name="l00441"></a>00441   
<a name="l00443"></a>00443   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#1b57ab4be8476155ebfbe0976c1b6996">decreaseRatio</a>();
<a name="l00444"></a>00444   
<a name="l00450"></a>00450   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#e4b3c178cec14c0c69c42b6a914c8d45">getCurrentEventInformation</a>(<span class="keywordtype">long</span> startTime,<span class="keywordtype">long</span> endTime,QObject* initiator);
<a name="l00451"></a>00451   
<a name="l00456"></a>00456   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#27d772e7205dbc8001b4687d3e984df2">traceBackgroundImageUpdate</a>(QImage traceBackgroundImage,<span class="keywordtype">bool</span> active);
<a name="l00457"></a>00457   
<a name="l00458"></a>00458 <span class="keyword">public</span> slots:
<a name="l00463"></a>00463   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#548bd1faa8bf3ed7fdf5341f45aa85fd">dataAvailable</a>(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; data,QObject* initiator);
<a name="l00464"></a>00464 
<a name="l00471"></a>00471   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#548bd1faa8bf3ed7fdf5341f45aa85fd">dataAvailable</a>(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; data,QObject* initiator,QString providerName);
<a name="l00472"></a>00472 
<a name="l00479"></a>00479   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#548bd1faa8bf3ed7fdf5341f45aa85fd">dataAvailable</a>(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; times,<a class="code" href="classArray.html">Array&lt;int&gt;</a>&amp; ids,QObject* initiator,QString providerName);
<a name="l00480"></a>00480   
<a name="l00489"></a>00489   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#2049c85ba67b7ff79a950ac8b4068fcf">nextClusterDataAvailable</a>(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; data,QObject* initiator,QString providerName,<span class="keywordtype">long</span> startingTime,<span class="keywordtype">long</span> startingTimeInRecordingUnits);
<a name="l00490"></a>00490 
<a name="l00499"></a>00499   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#c0fe0eea6b3051c62ff3cf0871030717">previousClusterDataAvailable</a>(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; data,QObject* initiator,QString providerName,<span class="keywordtype">long</span> startingTime,<span class="keywordtype">long</span> startingTimeInRecordingUnits);
<a name="l00500"></a>00500 
<a name="l00508"></a>00508   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#bd149b5b620ecc11d1e1499a45e6efa4">nextEventDataAvailable</a>(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; times,<a class="code" href="classArray.html">Array&lt;int&gt;</a>&amp; ids,QObject* initiator,QString providerName,<span class="keywordtype">long</span> startingTime);
<a name="l00509"></a>00509 
<a name="l00517"></a>00517   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#59b4fb426ed3ab99879242b592713de7">previousEventDataAvailable</a>(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; times,<a class="code" href="classArray.html">Array&lt;int&gt;</a>&amp; ids,QObject* initiator,QString providerName,<span class="keywordtype">long</span> startingTime);
<a name="l00518"></a>00518 
<a name="l00523"></a><a class="code" href="classTraceView.html#e8e38bfb7ae65efd01acaf9073233e2e">00523</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#e8e38bfb7ae65efd01acaf9073233e2e">eventToAddProperties</a>(QString providerName,QString eventDescription){
<a name="l00524"></a>00524    <span class="comment">//If an event is being modified, this function can be called with eventDescription set to empty,</span>
<a name="l00525"></a>00525    <span class="comment">//this should not be taken into account.</span>
<a name="l00526"></a>00526    <span class="keywordflow">if</span>(!eventBeingModified){
<a name="l00527"></a>00527     eventDescriptionToCreate = eventDescription;
<a name="l00528"></a>00528     eventProvider = providerName;     
<a name="l00529"></a>00529    }
<a name="l00530"></a>00530   };
<a name="l00531"></a>00531   
<a name="l00535"></a>00535   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#8e042ec7960ebe2462960bdda0e45ff8">skipStatusChanged</a>(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; skippedChannels);
<a name="l00536"></a>00536 
<a name="l00540"></a><a class="code" href="classTraceView.html#bceb39100cbf8b2f8d0259b056fbe21f">00540</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classTraceView.html#bceb39100cbf8b2f8d0259b056fbe21f">getRasterHeight</a>(){<span class="keywordflow">return</span> rasterHeight;};
<a name="l00541"></a>00541   
<a name="l00542"></a>00542   
<a name="l00543"></a>00543 signals:
<a name="l00544"></a>00544   <span class="keywordtype">void</span> channelsSelected(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; selectedIds);
<a name="l00545"></a>00545   <span class="keywordtype">void</span> setStartAndDuration(<span class="keywordtype">long</span> time,<span class="keywordtype">long</span> duration);
<a name="l00546"></a>00546   <span class="keywordtype">void</span> eventModified(QString providerName,<span class="keywordtype">int</span> selectedEventId,<span class="keywordtype">double</span> time,<span class="keywordtype">double</span> newTime);
<a name="l00547"></a>00547   <span class="keywordtype">void</span> eventRemoved(QString providerName,<span class="keywordtype">int</span> selectedEventId,<span class="keywordtype">double</span> time);
<a name="l00548"></a>00548   <span class="keywordtype">void</span> eventAdded(QString providerName,QString addedEventDescription,<span class="keywordtype">double</span> time);
<a name="l00549"></a>00549   <span class="keywordtype">void</span> eventsAvailable(QDict&lt;EventData&gt;&amp; eventsData,QMap&lt;QString, QValueList&lt;int&gt; &gt;&amp; selectedEvents,QDict&lt;ItemColors&gt;&amp; providerItemColors,QObject* initiator,<span class="keywordtype">double</span> samplingRate);
<a name="l00550"></a>00550 
<a name="l00551"></a>00551 <span class="keyword">protected</span>:
<a name="l00556"></a>00556   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#3d2736b45b2dd7c2bcfd9280ca54f45d">drawContents</a>(QPainter* painter);
<a name="l00557"></a>00557 
<a name="l00562"></a>00562   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#46fe7b30d938764df307d2f596154842">mouseMoveEvent</a>(QMouseEvent* event);
<a name="l00563"></a>00563 
<a name="l00568"></a><a class="code" href="classTraceView.html#8bf6c75ec5424a7ce5d52386fcf74e19">00568</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#8bf6c75ec5424a7ce5d52386fcf74e19">resizeEvent</a>(QResizeEvent* event){
<a name="l00569"></a>00569    <a class="code" href="classBaseFrame.html#49da95ca2ea8e59db1a135e661de87b8">drawContentsMode</a> = REDRAW;
<a name="l00570"></a>00570    resized = <span class="keyword">true</span>;
<a name="l00571"></a>00571   };
<a name="l00572"></a>00572 
<a name="l00576"></a>00576   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#b135528ae1c20a20f94d2c274b1d02b2">mousePressEvent</a>(QMouseEvent* event);
<a name="l00577"></a>00577 
<a name="l00581"></a>00581   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#041d717857451a3c78f78ec52fdf1d2f">mouseReleaseEvent</a>(QMouseEvent* event);  
<a name="l00582"></a>00582 
<a name="l00586"></a>00586   <span class="keywordtype">void</span> <a class="code" href="classTraceView.html#5c0256a198bc458babe3bada1090e458">mouseDoubleClickEvent</a>(QMouseEvent* event);
<a name="l00587"></a>00587   
<a name="l00588"></a>00588 <span class="keyword">private</span>:
<a name="l00589"></a>00589 
<a name="l00591"></a>00591   <span class="keywordtype">bool</span> greyScaleMode;
<a name="l00592"></a>00592 
<a name="l00594"></a>00594   KStatusBar* statusBar;
<a name="l00595"></a>00595 
<a name="l00597"></a>00597   <a class="code" href="classTracesProvider.html">TracesProvider</a>&amp; tracesProvider;
<a name="l00598"></a>00598 
<a name="l00600"></a>00600   <span class="keywordtype">bool</span> multiColumns;
<a name="l00601"></a>00601 
<a name="l00603"></a>00603   <span class="keywordtype">bool</span> verticalLines;
<a name="l00604"></a>00604 
<a name="l00606"></a>00606   <span class="keywordtype">bool</span> raster;
<a name="l00607"></a>00607 
<a name="l00609"></a>00609   <span class="keywordtype">bool</span> waveforms;
<a name="l00610"></a>00610 
<a name="l00612"></a>00612   QValueList&lt;int&gt; shownChannels;
<a name="l00613"></a>00613   
<a name="l00615"></a>00615   <span class="keywordtype">bool</span> dataReady;
<a name="l00616"></a>00616 
<a name="l00618"></a>00618   <a class="code" href="classArray.html">Array&lt;dataType&gt;</a> data;
<a name="l00619"></a>00619 
<a name="l00621"></a>00621   QValueList&lt;int&gt;&amp; channelOffsets;
<a name="l00622"></a>00622   
<a name="l00626"></a>00626   QValueList&lt;float&gt; channelFactors;
<a name="l00627"></a>00627 
<a name="l00631"></a>00631   QValueList&lt;int&gt;&amp; gains;
<a name="l00632"></a>00632   
<a name="l00634"></a>00634   <span class="keywordtype">int</span> traceVspace;
<a name="l00635"></a>00635 
<a name="l00637"></a>00637   <span class="keywordtype">int</span> nbChannels;
<a name="l00638"></a>00638 
<a name="l00640"></a>00640   <span class="keywordtype">int</span> peakPositionInWaveform;
<a name="l00641"></a>00641 
<a name="l00643"></a>00643   <span class="keywordtype">int</span> nbSamplesInWaveform;
<a name="l00644"></a>00644     
<a name="l00646"></a>00646   <span class="keywordtype">long</span> startTime;
<a name="l00647"></a>00647 
<a name="l00649"></a>00649   <span class="keywordtype">long</span> endTime;
<a name="l00650"></a>00650 
<a name="l00652"></a>00652   <a class="code" href="classChannelColors.html">ChannelColors</a>* channelColors;
<a name="l00653"></a>00653    
<a name="l00657"></a>00657   QMap&lt;int, QValueList&lt;int&gt; &gt;* groupsChannels;
<a name="l00658"></a>00658 
<a name="l00661"></a>00661   QMap&lt;int,int&gt;* channelsGroups;
<a name="l00662"></a>00662   
<a name="l00665"></a>00665   QMap&lt;int, QValueList&lt;int&gt; &gt; shownGroupsChannels;
<a name="l00666"></a>00666 
<a name="l00668"></a>00668   <span class="keywordtype">long</span> abscissaMin;
<a name="l00669"></a>00669 
<a name="l00671"></a>00671   <span class="keywordtype">long</span> abscissaMax;
<a name="l00672"></a>00672 
<a name="l00674"></a>00674   <span class="keywordtype">long</span> ordinateMin;
<a name="l00675"></a>00675 
<a name="l00677"></a>00677   <span class="keywordtype">long</span> ordinateMax;
<a name="l00678"></a>00678 
<a name="l00680"></a>00680   <span class="keywordtype">int</span> borderX;
<a name="l00681"></a>00681 
<a name="l00683"></a>00683   <span class="keywordtype">int</span> borderY;
<a name="l00684"></a>00684 
<a name="l00686"></a>00686   <span class="keywordtype">int</span> Yshift;
<a name="l00687"></a>00687 
<a name="l00689"></a>00689   <span class="keywordtype">int</span> Xshift;
<a name="l00690"></a>00690 
<a name="l00692"></a>00692   <span class="keywordtype">int</span> Xstep;
<a name="l00693"></a>00693 
<a name="l00695"></a>00695   <span class="keywordtype">int</span> XGroupSpace;
<a name="l00696"></a>00696 
<a name="l00698"></a>00698   <span class="keywordtype">int</span> Yspace;
<a name="l00699"></a>00699 
<a name="l00701"></a>00701   <span class="keywordtype">int</span> YGroupSpace;
<a name="l00702"></a>00702 
<a name="l00704"></a>00704   <span class="keywordtype">int</span> YTracesRasterSeparator;
<a name="l00705"></a>00705 
<a name="l00707"></a>00707   <span class="keywordtype">int</span> YRasterSpace;
<a name="l00708"></a>00708 
<a name="l00711"></a>00711   <span class="keywordtype">long</span> X0;
<a name="l00712"></a>00712 
<a name="l00715"></a>00715   <span class="keywordtype">long</span> Y0;
<a name="l00716"></a>00716 
<a name="l00718"></a>00718   <span class="keywordtype">long</span> Y0Raster;
<a name="l00719"></a>00719 
<a name="l00724"></a>00724   QPixmap doublebuffer;
<a name="l00725"></a>00725   
<a name="l00727"></a>00727   QImage background;
<a name="l00728"></a>00728 
<a name="l00730"></a>00730   QPixmap scaledBackground;
<a name="l00731"></a>00731   
<a name="l00732"></a>00732 
<a name="l00734"></a>00734   <span class="keywordtype">float</span> timeStep;
<a name="l00735"></a>00735 
<a name="l00737"></a>00737   <span class="keywordtype">float</span> timeStepUnit;
<a name="l00738"></a>00738 
<a name="l00740"></a>00740   <span class="keywordtype">int</span> acquisitionGain;
<a name="l00741"></a>00741   
<a name="l00743"></a>00743   <span class="keywordtype">int</span> unitGain;
<a name="l00744"></a>00744 
<a name="l00749"></a>00749   <span class="keywordtype">float</span> alpha;
<a name="l00750"></a>00750 
<a name="l00753"></a>00753   QValueList&lt;float&gt; channelDisplayGains;
<a name="l00754"></a>00754   
<a name="l00755"></a>00755   <span class="keywordtype">int</span> nbClusters;
<a name="l00756"></a>00756 
<a name="l00758"></a>00758   <span class="keywordtype">int</span> rasterHeight;
<a name="l00759"></a>00759 
<a name="l00761"></a>00761   <span class="keywordtype">long</span> timeFrameWidth;
<a name="l00762"></a>00762 
<a name="l00764"></a>00764   QMap&lt;int,int&gt; channelsStartingOrdinate;
<a name="l00765"></a>00765 
<a name="l00767"></a>00767   QMap&lt;int,int&gt; channelsStartingAbscissa;
<a name="l00768"></a>00768 
<a name="l00771"></a>00771   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> XMARGIN;
<a name="l00772"></a>00772 
<a name="l00775"></a>00775   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> YMARGIN;
<a name="l00776"></a>00776 
<a name="l00779"></a>00779   <span class="keywordtype">int</span> xMargin;
<a name="l00780"></a>00780 
<a name="l00783"></a>00783   <span class="keywordtype">int</span> yMargin;
<a name="l00784"></a>00784 
<a name="l00786"></a>00786   <span class="keywordtype">bool</span> columnDisplayChanged;
<a name="l00787"></a>00787 
<a name="l00789"></a>00789   <span class="keywordtype">bool</span> resized;
<a name="l00790"></a>00790 
<a name="l00792"></a>00792   QValueList&lt;int&gt; selectedChannels;
<a name="l00793"></a>00793 
<a name="l00795"></a>00795   <span class="keywordtype">bool</span> groupsChanged;
<a name="l00796"></a>00796 
<a name="l00798"></a>00798   <span class="keywordtype">int</span> previousDragOrdinate;
<a name="l00799"></a>00799 
<a name="l00801"></a>00801   <span class="keywordtype">int</span> lastClickOrdinate;
<a name="l00802"></a>00802 
<a name="l00803"></a>00803   <span class="comment">/*Boolean used to update the display after a change in the number of samples per trace.**/</span>
<a name="l00804"></a>00804   <span class="keywordtype">bool</span> nbSamplesModified;
<a name="l00805"></a>00805    
<a name="l00806"></a>00806   <span class="comment">/*Boolean used to update the display after a change in the selection of the traces.**/</span>
<a name="l00807"></a>00807   <span class="keywordtype">bool</span> alreadySelected;
<a name="l00808"></a>00808 
<a name="l00810"></a>00810   <span class="keywordtype">bool</span> isInit;
<a name="l00811"></a>00811 
<a name="l00813"></a>00813   <span class="keywordtype">int</span> screenResolution;
<a name="l00814"></a>00814 
<a name="l00816"></a>00816   <span class="keywordtype">int</span> channelforVoltageComputation;
<a name="l00817"></a>00817 
<a name="l00819"></a>00819   <span class="keywordtype">int</span> startingIndex;
<a name="l00820"></a>00820 
<a name="l00822"></a>00822   QCursor selectCursor;
<a name="l00823"></a>00823   
<a name="l00825"></a>00825   QCursor measureCursor;
<a name="l00826"></a>00826 
<a name="l00828"></a>00828   QCursor selectTimeCursor;
<a name="l00829"></a>00829 
<a name="l00831"></a>00831   QCursor selectEventCursor;
<a name="l00832"></a>00832 
<a name="l00834"></a>00834   QCursor addEventCursor;
<a name="l00835"></a>00835 
<a name="l00837"></a>00837   QCursor drawLineCursor;
<a name="l00838"></a>00838   
<a name="l00842"></a>00842   <span class="keywordtype">bool</span> showLabels;
<a name="l00843"></a>00843 
<a name="l00847"></a>00847   <span class="keywordtype">bool</span> showCalibrationScale;
<a name="l00848"></a>00848 
<a name="l00849"></a>00849 
<a name="l00853"></a>00853   <span class="keywordtype">float</span> downSampling;
<a name="l00854"></a>00854 
<a name="l00856"></a>00856   <span class="keywordtype">bool</span> zoomed;
<a name="l00857"></a>00857 
<a name="l00858"></a>00858   <span class="comment">/***Boolean indicating that the view has been zoomed for the no zoom state.*/</span>
<a name="l00859"></a>00859   <span class="keywordtype">bool</span> firstZoom;
<a name="l00860"></a>00860   
<a name="l00861"></a>00861   <span class="comment">/***Boolean indicating that the view has been zoomed and a reset has been asked.</span>
<a name="l00862"></a>00862 <span class="comment">  * If so the original down sampling has to be restore.*/</span>
<a name="l00863"></a>00863   <span class="keywordtype">bool</span> doubleClick;
<a name="l00864"></a>00864 
<a name="l00866"></a>00866   <span class="keywordtype">float</span> initialDownSampling;
<a name="l00867"></a>00867 
<a name="l00869"></a>00869   <span class="keywordtype">float</span> zoomFactor;
<a name="l00870"></a>00870 
<a name="l00871"></a>00871   <span class="comment">/***Boolean indicating that the view has been zoomed to the maximum.*/</span>  
<a name="l00872"></a>00872   <span class="keywordtype">bool</span> maxZoomReached;
<a name="l00873"></a>00873 
<a name="l00874"></a>00874   <span class="comment">/***Boolean indicating that the view has been zoomed out.*/</span>  
<a name="l00875"></a>00875   <span class="keywordtype">bool</span> zoomOut;
<a name="l00876"></a>00876   
<a name="l00878"></a>00878   QRect initialWindow;
<a name="l00879"></a>00879 
<a name="l00881"></a>00881   QRect previousWindow;
<a name="l00882"></a>00882 
<a name="l00884"></a>00884   <span class="keywordtype">int</span> traceWidth;
<a name="l00885"></a>00885 
<a name="l00887"></a>00887   <span class="keywordtype">int</span> initialXGroupSpace;
<a name="l00888"></a>00888 
<a name="l00890"></a>00890   <span class="keywordtype">int</span> initialXshift;
<a name="l00891"></a>00891 
<a name="l00893"></a>00893   <span class="keywordtype">int</span> initialTraceWidth;
<a name="l00894"></a>00894 
<a name="l00896"></a>00896   QMap&lt;int, QValueList&lt;int&gt; &gt; selectedClusters;
<a name="l00897"></a>00897 
<a name="l00899"></a>00899   <span class="keyword">struct </span>ClusterData{
<a name="l00900"></a>00900     <a class="code" href="classArray.html">Array&lt;dataType&gt;</a> data;
<a name="l00901"></a>00901     <span class="keywordtype">bool</span> ready;
<a name="l00902"></a>00902 
<a name="l00903"></a>00903     ClusterData(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a> d,<span class="keywordtype">bool</span> status){
<a name="l00904"></a>00904       data = d;
<a name="l00905"></a>00905       ready = status;
<a name="l00906"></a>00906     };
<a name="l00907"></a>00907     ClusterData(){
<a name="l00908"></a>00908      ready = <span class="keyword">false</span>; 
<a name="l00909"></a>00909     };
<a name="l00910"></a>00910     <span class="keywordtype">void</span> setStatus(<span class="keywordtype">bool</span> status){ready = status;};
<a name="l00911"></a>00911     <span class="keywordtype">void</span> setData(<a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; d){data = d;};
<a name="l00912"></a>00912     <span class="keywordtype">bool</span> status(){<span class="keywordflow">return</span> ready;};
<a name="l00913"></a>00913     <a class="code" href="classArray.html">Array&lt;dataType&gt;</a>&amp; getData(){<span class="keywordflow">return</span> data;};
<a name="l00914"></a>00914     
<a name="l00915"></a>00915     ~ClusterData(){};
<a name="l00916"></a>00916   };
<a name="l00917"></a>00917   
<a name="l00919"></a>00919   QDict&lt;ClusterData&gt; clustersData;
<a name="l00920"></a>00920 
<a name="l00922"></a>00922   QDict&lt;ClustersProvider&gt; clusterProviders;
<a name="l00923"></a>00923 
<a name="l00925"></a>00925   QDict&lt;ItemColors&gt; providerItemColors;
<a name="l00926"></a>00926 
<a name="l00930"></a>00930   QValueList&lt;QString&gt; clustersOrder;
<a name="l00931"></a>00931     
<a name="l00933"></a>00933   QValueList&lt;int&gt; rasterOrdinates;
<a name="l00934"></a>00934 
<a name="l00936"></a>00936   QValueList&lt;int&gt; rasterAbscisses;
<a name="l00937"></a>00937 
<a name="l00943"></a>00943   QMap&lt;int, QValueList&lt;int&gt; &gt;* groupClusterFiles;
<a name="l00944"></a>00944 
<a name="l00945"></a>00945   <span class="comment">/*Map between the channel ids and the spike group ids. */</span>
<a name="l00946"></a>00946   QMap&lt;int,int&gt;* channelClusterFiles;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948   <span class="comment">/*Number of samples before the sample of the peak are contained in the waveform of a spike.*/</span>
<a name="l00949"></a>00949   <span class="keywordtype">int</span> nbSamplesBefore;
<a name="l00950"></a>00950 
<a name="l00951"></a>00951   <span class="comment">/*Number of samples after the sample of the peak are contained in the waveform of a spike.*/</span>
<a name="l00952"></a>00952   <span class="keywordtype">int</span> nbSamplesAfter;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954   <span class="comment">/*True if the view is currently been printed, false otherwise.**/</span>
<a name="l00955"></a>00955   <span class="keywordtype">bool</span> printState;
<a name="l00956"></a>00956   
<a name="l00958"></a>00958   QMap&lt;QString, QValueList&lt;int&gt; &gt; selectedEvents;
<a name="l00959"></a>00959 
<a name="l00962"></a>00962   QPair&lt;QString,long&gt; nextClusterProvider;
<a name="l00963"></a>00963 
<a name="l00966"></a>00966   QPair&lt;QString,long&gt; previousClusterProvider;
<a name="l00967"></a>00967 
<a name="l00969"></a>00969   QString clusterProviderToSkip;
<a name="l00970"></a>00970   
<a name="l00974"></a>00974   <span class="keywordtype">long</span> startTimeInRecordingUnits;
<a name="l00975"></a>00975   
<a name="l00979"></a>00979   <span class="keywordtype">long</span> previousStartTimeInRecordingUnits;
<a name="l00980"></a>00980 
<a name="l00982"></a>00982   <span class="keywordtype">bool</span> spikeBrowsing;
<a name="l00983"></a>00983   
<a name="l00985"></a>00985   QDict&lt;EventData&gt; eventsData;
<a name="l00986"></a>00986 
<a name="l00988"></a>00988   QDict&lt;EventsProvider&gt; eventProviders;
<a name="l00989"></a>00989 
<a name="l00992"></a>00992   QPair&lt;QString,long&gt; nextEventProvider;
<a name="l00993"></a>00993 
<a name="l00996"></a>00996   QPair&lt;QString,long&gt; previousEventProvider;
<a name="l00997"></a>00997 
<a name="l00999"></a>00999   QString eventProviderToSkip;
<a name="l01000"></a>01000 
<a name="l01002"></a>01002   <span class="keywordtype">long</span> <span class="keywordtype">long</span> recordingLength;
<a name="l01003"></a>01003 
<a name="l01005"></a>01005   QPair&lt;QString,int&gt; selectedEvent;
<a name="l01006"></a>01006 
<a name="l01008"></a>01008   <span class="keywordtype">int</span> previousDragAbscissa;
<a name="l01009"></a>01009 
<a name="l01011"></a>01011   <span class="keywordtype">int</span> lastClickAbscissa;
<a name="l01012"></a>01012 
<a name="l01014"></a>01014   QValueList&lt;int&gt; selectedEventPosition;
<a name="l01015"></a>01015 
<a name="l01017"></a>01017   <span class="keywordtype">bool</span> startEventDragging;
<a name="l01018"></a>01018 
<a name="l01021"></a>01021   QValueList&lt;QString&gt; eventProvidersToUpdate;
<a name="l01022"></a>01022 
<a name="l01024"></a>01024   <span class="keywordtype">int</span> newEventPosition;
<a name="l01025"></a>01025 
<a name="l01027"></a>01027   QString eventDescriptionToCreate;
<a name="l01028"></a>01028 
<a name="l01030"></a>01030   QString eventProvider;
<a name="l01031"></a>01031 
<a name="l01033"></a>01033   <span class="keywordtype">bool</span> eventBeingModified;
<a name="l01034"></a>01034 
<a name="l01036"></a>01036   QMap&lt;QString, QValueList&lt;int&gt; &gt; clustersNotUsedForBrowsing;
<a name="l01037"></a>01037 
<a name="l01039"></a>01039   QMap&lt;QString, QValueList&lt;int&gt; &gt; eventsNotUsedForBrowsing;
<a name="l01040"></a>01040   
<a name="l01041"></a>01041   <span class="keywordtype">bool</span> retrieveClusterData;
<a name="l01042"></a>01042   
<a name="l01043"></a>01043   <span class="comment">/*List of skipped channels.*/</span>
<a name="l01044"></a>01044   QValueList&lt;int&gt; skippedChannels;
<a name="l01045"></a>01045   
<a name="l01046"></a>01046   <span class="comment">/*List of positions for the current lines to be drawn.*/</span>
<a name="l01047"></a>01047   QValueList&lt;int&gt; linePositions;
<a name="l01048"></a>01048   
<a name="l01049"></a>01049  <span class="comment">//***************Functions************</span>
<a name="l01050"></a>01050  
<a name="l01052"></a>01052  <span class="keywordtype">void</span> updateWindow();
<a name="l01053"></a>01053 
<a name="l01058"></a>01058  <span class="keywordtype">void</span> updateShownGroupsChannels(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; channelsToShow);
<a name="l01059"></a>01059 
<a name="l01064"></a>01064  <span class="keywordtype">void</span> drawTraces(QPainter&amp; painter);
<a name="l01065"></a>01065 
<a name="l01071"></a>01071  <span class="keywordtype">void</span> drawTraces(QValueList&lt;int&gt; channels,<span class="keywordtype">bool</span> highlight); 
<a name="l01072"></a>01072 
<a name="l01085"></a>01085  <span class="keywordtype">void</span> drawTrace(QPainter&amp; painter,<span class="keywordtype">int</span> limit,<span class="keywordtype">int</span> basePosition,<span class="keywordtype">int</span> X,<span class="keywordtype">int</span> channelId,<span class="keywordtype">int</span> nbSamplesToDraw,<span class="keywordtype">bool</span> <a class="code" href="classTraceView.html#46fe7b30d938764df307d2f596154842">mouseMoveEvent</a> = <span class="keyword">false</span>);
<a name="l01086"></a>01086    
<a name="l01090"></a>01090  <span class="keywordtype">void</span> drawChannelIdsAndGain(QPainter&amp; painter);
<a name="l01091"></a>01091 
<a name="l01093"></a>01093  <span class="keywordtype">void</span> computeChannelDisplayGain();
<a name="l01094"></a>01094 
<a name="l01098"></a>01098  <span class="keywordtype">void</span> computeChannelDisplayGain(<span class="keyword">const</span> QValueList&lt;int&gt;&amp; selectedChannels);
<a name="l01099"></a>01099 
<a name="l01103"></a>01103  <span class="keywordtype">void</span> drawCalibrationScale(QPainter&amp; painter);
<a name="l01104"></a>01104 
<a name="l01108"></a>01108  <span class="keywordtype">void</span> correctZoom(QRect&amp; r);
<a name="l01109"></a>01109 
<a name="l01110"></a>01110 
<a name="l01117"></a>01117  <span class="keywordtype">void</span> drawEvent(QString providerName,<span class="keywordtype">int</span> selectedEventId,dataType selectedEventIndex,<span class="keywordtype">bool</span> highlight);
<a name="l01118"></a>01118  
<a name="l01124"></a>01124  <span class="keywordtype">void</span> drawTimeLine(<span class="keywordtype">int</span> x,<span class="keywordtype">bool</span> initialLine,<span class="keywordtype">bool</span> eraseLine = <span class="keyword">false</span>);
<a name="l01125"></a>01125  
<a name="l01127"></a>01127   <span class="keywordtype">void</span> scaleBackgroundImage();
<a name="l01128"></a>01128 
<a name="l01129"></a>01129 };
<a name="l01130"></a>01130 
<a name="l01131"></a>01131 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Oct 15 22:24:37 2006 for NeuroScope by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
